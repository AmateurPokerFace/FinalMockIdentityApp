@using FinalMockIdentityXCountry.Models.ViewModels.CoachAreaViewModels.CurrentPracticeController
@model List<AddRunnerToCurrentPracticeViewModel>

@if (Model != null && Model.Count() > 0)
{
    <div class="container mx-auto">
        <h3>Add runners to practice @Model.FirstOrDefault().PracticeStartTimeAndDate | @Model.FirstOrDefault().PracticeLocation</h3>
        <form method="post" asp-action="AddRunnerToCurrentPractice" class="form-control">
            @if (Model != null && Model.Count > 0)
            {

                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Name</th>
                                <th scope="col">Add to attendance</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (int i = 0; i < Model.Count(); i++)
                            {
                                <tr>
                                    <td scope="row">@Model[i].Name</td>
                                    @if (Model[i].SelectedCheckboxOptions != null && Model[i].SelectedCheckboxOptions.Count > 0)
                                    {
                                        @for (int j = 0; j < Model[i].SelectedCheckboxOptions.Count(); j++)
                                        {
                                            <td>
                                                <input asp-for="@Model[i].SelectedCheckboxOptions[j].IsSelected" type="checkbox" />
                                                <input type="hidden" asp-for="@Model[i].RunnerId" />
                                                <input type="hidden" asp-for="@Model[i].AttendanceId" />
                                                <input type="hidden" asp-for="@Model[i].SelectedCheckboxOptions[j].RunnerId" />
                                                <input type="hidden" asp-for="@Model[i].SelectedCheckboxOptions[j].AttendanceId" />
                                            </td>
                                        }
                                    }
                                </tr>
                            }
                        </tbody>
                    </table>

                </div>
                <button class="btn btn-primary" type="submit">Submit</button> 
            } 
        </form>
    </div>
}
else
{
    <label class="form-label">There are no runners marked as absent.</label>
    <br />
    <a asp-action="Index" class="btn btn-primary">Okay</a>
}
